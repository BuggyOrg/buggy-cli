{"code":"\n(defco fold [list fn init]\n  (logic/mux\n    init\n    (functional/apply (functional/partial 1 fn (array/first list)) (fold (array/rest list) fn init))\n    (array/empty list)))\n\n(defco filter [list fn]\n  (fold list (functional/partial 0 (lambda (fn acc cur)\n    (logic/mux\n      (array/prepend acc cur)\n      acc\n      (functional/apply fn cur))) fn) []))\n\n(defco partition-left [list p]\n  (filter list (functional/partial 0 (lambda (n m) (math/less m n)) p)))\n\n(defco partition-right [list p]\n  (filter list (functional/partial 0 (lambda (n m) (math/less n m)) p)))\n\n(defco quicksort [list]\n  (logic/mux\n    list\n    (array/concat\n      (array/append (quicksort (partition-left (array/rest list) (array/first list))) (array/first list))\n      (quicksort (partition-right (array/rest list) (array/first list))))\n    (array/empty list)))\n\n;(defco quicksort [list]\n;   (array/concat\n;     (quicksort (partition-left (array/rest list) (array/first list)))\n;      (quicksort (partition-right (array/rest list) (array/first list)))))\n\n(io/stdout (translator/array_to_string (quicksort (translator/string_to_array (io/stdin)))))\n","nodes":[{"v":"defco_fold","value":{"id":"fold","inputPorts":{"list":"generic","fn":"generic","init":"generic"},"outputPorts":{"value":"generic"},"implementation":{"nodes":[{"meta":"logic/mux","name":"mux_0"},{"meta":"functional/apply","name":"apply_1"},{"meta":"functional/partial","name":"partial_2","params":{"partial":1}},{"meta":"array/first","name":"first_3"},{"meta":"fold","name":"fold_4"},{"meta":"array/rest","name":"rest_5"},{"meta":"array/empty","name":"empty_6"}],"edges":[{"from":"init","to":"mux_0:input1"},{"from":"fn","to":"partial_2:fn"},{"from":"list","to":"first_3:array"},{"from":"first_3:value","to":"partial_2:value"},{"from":"partial_2:result","to":"apply_1:fn"},{"from":"list","to":"rest_5:array"},{"from":"rest_5:rest","to":"fold_4:list"},{"from":"fn","to":"fold_4:fn"},{"from":"init","to":"fold_4:init"},{"from":"fold_4:value","to":"apply_1:value"},{"from":"apply_1:result","to":"mux_0:input2"},{"from":"list","to":"empty_6:array"},{"from":"empty_6:isEmpty","to":"mux_0:control"},{"from":"mux_0:output","to":"value"}]},"name":"defco_fold"}},{"v":"defco_filter","value":{"id":"filter","inputPorts":{"list":"generic","fn":"generic"},"outputPorts":{"value":"generic"},"implementation":{"nodes":[{"meta":"fold","name":"fold_7"},{"meta":"functional/partial","name":"partial_8","params":{"partial":0}},{"meta":"functional/lambda","name":"lambda_9","outputPorts":{"fn":"lambda"},"inputPorts":{},"data":{"outputPorts":{"value_0":"generic"},"inputPorts":{"fn":"generic","acc":"generic","cur":"generic"},"implementation":{"nodes":[{"meta":"logic/mux","name":"mux_10"},{"meta":"array/prepend","name":"prepend_11"},{"meta":"functional/apply","name":"apply_12"}],"edges":[{"from":"acc","to":"prepend_11:array"},{"from":"cur","to":"prepend_11:value"},{"from":"prepend_11:result","to":"mux_10:input1"},{"from":"acc","to":"mux_10:input2"},{"from":"fn","to":"apply_12:fn"},{"from":"cur","to":"apply_12:value"},{"from":"apply_12:result","to":"mux_10:control"},{"from":"mux_10:output","to":"value_0"}]}}},{"meta":"array/emptyArray","name":"array/emptyArray_13"}],"edges":[{"from":"list","to":"fold_7:list"},{"from":"lambda_9:fn","to":"partial_8:fn"},{"from":"fn","to":"partial_8:value"},{"from":"partial_8:result","to":"fold_7:fn"},{"from":"array/emptyArray_13:output","to":"fold_7:init"},{"from":"fold_7:value","to":"value"}]},"name":"defco_filter"}},{"v":"defco_partition-left","value":{"id":"partition-left","inputPorts":{"list":"generic","p":"generic"},"outputPorts":{"value":"generic"},"implementation":{"nodes":[{"meta":"filter","name":"filter_14"},{"meta":"functional/partial","name":"partial_15","params":{"partial":0}},{"meta":"functional/lambda","name":"lambda_16","outputPorts":{"fn":"lambda"},"inputPorts":{},"data":{"outputPorts":{"value_0":"generic"},"inputPorts":{"n":"generic","m":"generic"},"implementation":{"nodes":[{"meta":"math/less","name":"less_17"}],"edges":[{"from":"m","to":"less_17:isLess"},{"from":"n","to":"less_17:than"},{"from":"less_17:value","to":"value_0"}]}}}],"edges":[{"from":"list","to":"filter_14:list"},{"from":"lambda_16:fn","to":"partial_15:fn"},{"from":"p","to":"partial_15:value"},{"from":"partial_15:result","to":"filter_14:fn"},{"from":"filter_14:value","to":"value"}]},"name":"defco_partition-left"}},{"v":"defco_partition-right","value":{"id":"partition-right","inputPorts":{"list":"generic","p":"generic"},"outputPorts":{"value":"generic"},"implementation":{"nodes":[{"meta":"filter","name":"filter_18"},{"meta":"functional/partial","name":"partial_19","params":{"partial":0}},{"meta":"functional/lambda","name":"lambda_20","outputPorts":{"fn":"lambda"},"inputPorts":{},"data":{"outputPorts":{"value_0":"generic"},"inputPorts":{"n":"generic","m":"generic"},"implementation":{"nodes":[{"meta":"math/less","name":"less_21"}],"edges":[{"from":"n","to":"less_21:isLess"},{"from":"m","to":"less_21:than"},{"from":"less_21:value","to":"value_0"}]}}}],"edges":[{"from":"list","to":"filter_18:list"},{"from":"lambda_20:fn","to":"partial_19:fn"},{"from":"p","to":"partial_19:value"},{"from":"partial_19:result","to":"filter_18:fn"},{"from":"filter_18:value","to":"value"}]},"name":"defco_partition-right"}},{"v":"stdout_35","value":{"meta":"io/stdout","name":"stdout_35"}},{"v":"array_to_string_36","value":{"meta":"translator/array_to_string","name":"array_to_string_36"}},{"v":"quicksort_37","value":{"id":"quicksort","inputPorts":{"list":"generic"},"outputPorts":{"value":"generic"},"implementation":{"nodes":[{"meta":"logic/mux","name":"mux_22"},{"meta":"array/concat","name":"concat_23"},{"meta":"array/append","name":"append_24"},{"meta":"quicksort","name":"quicksort_25"},{"meta":"partition-left","name":"partition-left_26"},{"meta":"array/rest","name":"rest_27"},{"meta":"array/first","name":"first_28"},{"meta":"array/first","name":"first_29"},{"meta":"quicksort","name":"quicksort_30"},{"meta":"partition-right","name":"partition-right_31"},{"meta":"array/rest","name":"rest_32"},{"meta":"array/first","name":"first_33"},{"meta":"array/empty","name":"empty_34"}],"edges":[{"from":"list","to":"mux_22:input1"},{"from":"list","to":"rest_27:array"},{"from":"rest_27:rest","to":"partition-left_26:list"},{"from":"list","to":"first_28:array"},{"from":"first_28:value","to":"partition-left_26:p"},{"from":"partition-left_26:value","to":"quicksort_25:list"},{"from":"quicksort_25:value","to":"append_24:array"},{"from":"list","to":"first_29:array"},{"from":"first_29:value","to":"append_24:value"},{"from":"append_24:result","to":"concat_23:array1"},{"from":"list","to":"rest_32:array"},{"from":"rest_32:rest","to":"partition-right_31:list"},{"from":"list","to":"first_33:array"},{"from":"first_33:value","to":"partition-right_31:p"},{"from":"partition-right_31:value","to":"quicksort_30:list"},{"from":"quicksort_30:value","to":"concat_23:array2"},{"from":"concat_23:result","to":"mux_22:input2"},{"from":"list","to":"empty_34:array"},{"from":"empty_34:isEmpty","to":"mux_22:control"},{"from":"mux_22:output","to":"value"}]},"name":"quicksort_37"}},{"v":"string_to_array_38","value":{"meta":"translator/string_to_array","name":"string_to_array_38"}},{"v":"stdin_39","value":{"meta":"io/stdin","name":"stdin_39"}}],"edges":[{"v":"stdin_39","w":"string_to_array_38","value":{"outPort":"output","inPort":"input"}},{"v":"string_to_array_38","w":"quicksort_37","value":{"outPort":"output","inPort":"list"}},{"v":"quicksort_37","w":"array_to_string_36","value":{"outPort":"value","inPort":"input"}},{"v":"array_to_string_36","w":"stdout_35","value":{"outPort":"output","inPort":"input"}}]}
